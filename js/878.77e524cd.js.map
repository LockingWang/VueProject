{"version":3,"file":"js/878.77e524cd.js","mappings":"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","sources":["webpack://vue-project/./src/components/UserCart.vue","webpack://vue-project/./src/components/UserCart.vue?ce6b"],"sourcesContent":["<template>\n  <LoadingOverlay :active=\"isLoading\"></LoadingOverlay>\n  <div class=\"bg-light\">\n    <div class=\"container bg-light\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-11 bg-white mt-5\">\n          <div class=\"row justify-content-center\">\n            <div class=\"col-md-8 mb-5 pt-3\">\n              <h5 class=\"text-center\">訂購流程</h5>\n              <div class=\"row g-3 justify-content-center\">\n                <div class=\"col-sm-4\" style=\"max-width: 200px;\">\n                  <div class=\"border border-3 border-danger rounded\">\n                    <p class=\"text-center text-danger mb-0\">確認購物車</p>\n                  </div>\n                </div>\n                <div class=\"col-sm-4\" style=\"max-width: 200px;\">\n                  <div class=\"border border-3 border-secondary rounded\">\n                    <p class=\"text-center text-secondary mb-0\">填寫訂購資訊</p>\n                  </div>\n                </div>\n                <div class=\"col-sm-4\" style=\"max-width: 200px;\">\n                  <div class=\"border border-3 border-secondary rounded\">\n                    <p class=\"text-center text-secondary mb-0\">建立訂單</p>\n                  </div>\n                </div>\n              </div>\n              <div class=\"my-3\">\n                <h5 class=\"text-center mt-3 fw-bold\">購物車</h5>\n                <table class=\"table align-middle\">\n                  <thead class=\"table-light\">\n                    <tr>\n                      <th></th>\n                      <th>品名</th>\n                      <th style=\"width: 120px\">數量</th>\n                      <th class=\"text-center\">單價</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                  <template v-if=\"!cart.carts.length == 0\">\n                    <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                      <td>\n                        <button type=\"button\" class=\"btn btn-outline-danger btn-sm\"\n                                @click=\"removeCartItem(item.id)\">\n                          <i class=\"bi bi-trash\"></i>\n                        </button>\n                      </td>\n                      <td>\n                        {{ item.product.title }}\n                        <div class=\"text-success\" v-if=\"item.coupon\">\n                          已套用優惠券\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"input-group input-group-sm\">\n                          <input type=\"number\" class=\"form-control\" aria-label=\"buy number\"\n                                v-model.number=\"item.qty\" min=\"1\"\n                                @change=\"updateCart(item)\"\n                                :disabled=\"this.status.loadingItem === item.id\">\n                          <div class=\"input-group-text bg-warning\">/ {{ item.product.unit }}</div>\n                        </div>\n                      </td>\n                      <td class=\"text-end\">\n                        <p v-if=\"item.coupon\" class=\"text-success mb-0\">折扣價</p>\n                        {{ $filters.currency(item.final_total) }}\n                        <span style=\"font-size: 8px;\">NTD</span>\n                      </td>\n                    </tr>\n                  </template>\n                  <tr v-else>\n                    <td colspan=\"4\">\n                      <p class=\"text-center text-secondary\">目前購物車內沒有商品...</p>\n                    </td>\n                  </tr>\n                  </tbody>\n                  <tfoot>\n                  <tr>\n                    <td colspan=\"2\">\n                      <button type=\"button\" class=\"btn btn-outline-danger\"\n                      @click=\"removeCartItem('all')\"\n                      :disabled=\"cart.carts.length == 0\">清空購物車</button>\n                    </td>\n                    <td colspan=\"1\" class=\"text-end\">總計</td>\n                    <td class=\"text-end\">\n                      {{ $filters.currency(cart.total) }}\n                      <span style=\"font-size: 8px;\">NTD</span>\n                    </td>\n                  </tr>\n                  <tr v-if=\"cart.final_total !== cart.total\">\n                    <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n                    <td class=\"text-end text-success\">\n                      {{ $filters.currency(cart.final_total) }}\n                      <span style=\"font-size: 8px;\">NTD</span>\n                    </td>\n                  </tr>\n                  </tfoot>\n                </table>\n\n                <div class=\"d-flex justify-content-between\">\n                  <div class=\"input-group input-group-sm mb-1\" style=\"max-width: 300px;\">\n                    <input type=\"text\" class=\"form-control\" aria-label=\"coupon_code\"\n                    v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\n                    <button class=\"btn btn-warning\" type=\"button\" @click=\"textCheck\"\n                    :disabled=\"coupon_code === '' || cart.carts.length == 0\">\n                        套用優惠碼\n                    </button>\n                  </div>\n                  <router-link to=\"/couponGame\" class=\"btn btn-outline-warning\">\n                    優惠券專區</router-link>\n                </div>\n\n                <p class=\"text-danger\" v-if=\"specialText\">優惠碼不含特殊符號</p>\n              </div>\n              <router-link to=\"/userCheckout/userInfo\" class=\"btn btn-danger w-100\"\n              v-if=\"!cart.carts.length == 0\">\n              下一步 : 填寫訂購資訊</router-link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      specialText: false,\n      cart: {\n        carts: [],\n      },\n      coupon_code: '',\n      status: {\n        loadingItem: '', // 對應品項 id\n      },\n    };\n  },\n  inject: ['$httpMessageState'],\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url)\n        .then((res) => {\n          this.cart = res.data.data;\n          this.isLoading = false;\n        });\n    },\n    updateCart(item) {\n      let modifyQty = 1;\n      if (item.qty >= 1) {\n        modifyQty = item.qty;\n      }\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.isLoading = true;\n      this.status.loadingItem = item.id;\n      const cart = {\n        product_id: item.product_id,\n        qty: modifyQty,\n      };\n      this.$http.put(url, { data: cart })\n        .then(() => {\n          this.isLoading = false;\n          this.status.loadingItem = '';\n          this.getCart();\n        })\n        .catch((err) => {\n          console.log(err.response);\n        });\n    },\n    removeCartItem(id) {\n      let target = 'carts';\n      if (id !== 'all') {\n        target = `cart/${id}`;\n      }\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/${target}`;\n      this.isLoading = true;\n      this.$http.delete(url)\n        .then(() => {\n          this.isLoading = false;\n          this.$httpMessageState('success', '刪除商品成功', '快去尋找更適合的商品吧 ~ !');\n          this.getCart();\n        })\n        .catch((err) => {\n          console.log(err.response);\n          this.$httpMessageState('danger', '發生錯誤', '請聯繫工程師。');\n        });\n    },\n    addCouponCode() {\n      this.coupon_code = this.coupon_code.trim();\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http.post(url, { data: coupon })\n        .then((res) => {\n          this.isLoading = false;\n          if (res.data.success) {\n            this.$httpMessageState('success', '套用優惠券成功', '確認商品後，點擊下一步填寫資料。');\n            this.getCart();\n          } else {\n            this.$httpMessageState('warning', '套用優惠券失敗', res.data.message);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          this.$httpMessageState('danger', '發生錯誤', '請聯繫工程師。');\n        });\n    },\n    textCheck() {\n      const newText = this.coupon_code.replace(/[`~!@#$%^&*()+=<>?:\"{}|,./;'\\\\[\\]·~！@#￥%……&*（）——\\-+={}|《》？：“”【】、；‘’，。、]/g, '');\n      if (newText !== this.coupon_code) {\n        this.specialText = true;\n      } else {\n        this.specialText = false;\n        this.addCouponCode();\n      }\n    },\n  },\n  created() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./UserCart.vue?vue&type=template&id=4b8054fb\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\GitHub\\\\VueProject\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_hoisted_14","colspan","_hoisted_24","_createVNode","_component_LoadingOverlay","active","$data","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","cart","carts","length","_createElementBlock","_Fragment","key","_renderList","item","id","type","onClick","$event","$options","removeCartItem","product","title","coupon","_hoisted_16","_hoisted_17","qty","min","onChange","updateCart","disabled","status","loadingItem","_hoisted_19","_toDisplayString","unit","_hoisted_20","_hoisted_21","_ctx","$filters","currency","final_total","_hoisted_22","_hoisted_23","_hoisted_25","_hoisted_26","_cache","_hoisted_27","_hoisted_28","_hoisted_29","total","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","coupon_code","placeholder","args","textCheck","_hoisted_37","_component_router_link","to","specialText","_hoisted_38","_createBlock","data","inject","methods","getCart","url","this","$http","get","then","res","modifyQty","product_id","put","catch","err","console","log","response","target","delete","$httpMessageState","addCouponCode","trim","code","post","success","message","newText","replace","created","__exports__","render"],"sourceRoot":""}