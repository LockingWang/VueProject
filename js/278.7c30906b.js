"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[278],{4612:function(t,e,i){i(7658);e["Z"]={data(){return{filtedProducts:[],pagination:{total_pages:"",current_page:1,has_pre:!1,has_next:!1},filter:"",searchText:""}},methods:{filtProducts(t=1){""===this.filter?this.filtedProducts=this.products.filter((t=>t.title.match(this.searchText))):(this.filtedProducts=this.products.filter((t=>t.category===this.filter)),this.filtedProducts=this.filtedProducts.filter((t=>t.title.match(this.searchText)))),"previous"===t?this.pagination.current_page-=1:"next"===t?this.pagination.current_page+=1:this.pagination.current_page=1===t?1:t,this.pagination.total_pages=Math.ceil(this.filtedProducts.length/this.pageItems),1===this.pagination.current_page?(this.pagination.has_pre=!1,this.pagination.has_next=!0,1===this.pagination.total_pages&&(this.pagination.has_next=!1)):this.pagination.current_page===this.pagination.total_pages?(this.pagination.has_next=!1,this.pagination.has_pre=!0):(this.pagination.has_next=!0,this.pagination.has_pre=!0);const e=[],i=this.pagination.current_page;this.filtedProducts.forEach(((t,s)=>{s<=i*this.pageItems-1&&s>=i*this.pageItems-this.pageItems&&e.push(t)})),this.filtedProducts=e}}}},8692:function(t,e){e["Z"]={methods:{hoverEffect(t,e){const i=document.getElementById(e.target.dataset.id);"in"===t?i.classList.add("card-hover"):i.classList.remove("card-hover")}}}},5239:function(t,e,i){i.d(e,{Z:function(){return f}});var s=i(3396),a=i(7139),o=i(9242);const n={"aria-label":"Page navigation example"},l={class:"pagination justify-content-center"},c=(0,s._)("span",{"aria-hidden":"true"},"«",-1),r=[c],d=["onClick"],g=(0,s._)("span",{"aria-hidden":"true"},"»",-1),u=[g];function p(t,e,i,c,g,p){return(0,s.wg)(),(0,s.iD)("nav",n,[(0,s._)("ul",l,[(0,s._)("li",{class:(0,a.C_)(["page-item",{"page-link-disabled":!i.pages.has_pre}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,o.iM)((t=>p.updatePage("previous")),["prevent"]))},r)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.pages.total_pages,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,a.C_)(["page-item",{active:t===i.pages.current_page}]),key:t},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,o.iM)((e=>p.updatePage(t)),["prevent"])},(0,a.zw)(t),9,d)],2)))),128)),(0,s._)("li",{class:(0,a.C_)(["page-item",{"page-link-disabled":!i.pages.has_next}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,o.iM)((t=>p.updatePage("next")),["prevent"]))},u)],2)])])}var h={props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},_=i(89);const m=(0,_.Z)(h,[["render",p]]);var f=m},6278:function(t,e,i){i.r(e),i.d(e,{default:function(){return at}});var s=i(3396),a=i(7139),o=i(9242);const n=(0,s._)("div",{class:"products-banner mb-3"},[(0,s._)("div",{class:"banner-text d-flex align-items-center justify-content-center"},[(0,s._)("h1",{class:"text-white"},"商品專區")])],-1),l={class:"container-fluid"},c={class:"row justify-content-center"},r={class:"col-lg-9"},d={class:"row"},g={class:"col-md-6"},u={class:"fs-5 mb-3"},p={class:"d-flex list-unstyled"},h=(0,s._)("li",{class:"link-info"},"首頁 / ",-1),_=(0,s._)("li",{class:"link-info"},"商品專區 / ",-1),m={class:"link-danger ms-2"},f={class:"col-md-6"},v={class:"input-group mb-3"},b=(0,s._)("button",{class:"input-group-text border-0 bg-light"},[(0,s._)("i",{class:"bi bi-search"})],-1),x={key:0,class:"text-danger d-block text-end mb-3"},k={class:"mb-3"},y={class:"row"},w={class:"col-md-2"},C={class:"list-group text-center sticky-top mb-3",style:{top:"70px"}},P={class:"col-md-10"},L={key:0,class:"row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3"},I=["id"],D={class:"position-absolute end-0",style:{"z-index":"2"}},T=["onClick"],M=(0,s._)("i",{class:"bi bi-heart text-white fs-5"},null,-1),Z=(0,s._)("span",{class:"ms-1 text-white fs-5"},"加入收藏",-1),j=[M,Z],E=["onClick"],S=(0,s._)("i",{class:"bi bi-heart-fill text-danger fs-5"},null,-1),$=(0,s._)("span",{class:"ms-1 text-danger fs-5"},"喜歡的商品",-1),z=[S,$],F={class:"img-box"},U={class:"card-body position-relative pb-0 border-top"},N={class:"text-white bg-danger d-inline px-1 position-absolute top-0 end-0"},O={class:"mt-2 text-ellipsis-multi"},H={class:"d-flex flex-wrap justify-content-between align-items-end"},J={class:"text-secondary fs-6 text-decoration-line-through text-nowrap"},W={class:"text-danger fs-5 text-nowrap"},Y={class:"card-footer"},K=["data-id","onClick"],q={key:1},B=(0,s._)("div",{class:"d-flex text-secondary justify-content-center align-items-center mt-3"},[(0,s._)("i",{class:"bi bi-cloud-slash fs-1 me-3"}),(0,s._)("h5",{class:"text-center"},[(0,s.Uk)("歐歐~ 好像找不到相關的商品呢 ! "),(0,s._)("br"),(0,s.Uk)("再試試看其他關鍵字吧 !")])],-1),V=[B];function A(t,e,i,M,Z,S){const $=(0,s.up)("LoadingOverlay"),B=(0,s.up)("PaginationModel"),A=(0,s.up)("UserCart");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)($,{active:Z.isLoading},null,8,["active"]),n,(0,s._)("div",l,[(0,s._)("div",c,[(0,s._)("div",r,[(0,s._)("section",null,[(0,s._)("div",d,[(0,s._)("div",g,[(0,s._)("div",u,[(0,s._)("ul",p,[h,_,(0,s._)("li",m,(0,a.zw)(t.filter),1)])])]),(0,s._)("div",f,[(0,s._)("div",v,[b,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"進一步搜尋商品","aria-label":"search","onUpdate:modelValue":e[0]||(e[0]=e=>t.searchText=e),onChange:e[1]||(e[1]=t=>S.textCheck())},null,544),[[o.nr,t.searchText]])]),Z.specialText?((0,s.wg)(),(0,s.iD)("span",x,"請勿輸入特殊字元")):(0,s.kq)("",!0)])])]),(0,s._)("section",k,[(0,s._)("div",y,[(0,s._)("div",w,[(0,s._)("div",C,[(0,s._)("button",{type:"button",class:(0,a.C_)(["list-group-item list-group-item-action",{active:""==t.filter}]),onClick:e[2]||(e[2]=t=>S.changeFilter(""))},"全部商品",2),(0,s._)("button",{type:"button",class:(0,a.C_)(["list-group-item list-group-item-action",{active:"化妝品"==t.filter}]),onClick:e[3]||(e[3]=t=>S.changeFilter("化妝品"))},"化妝品",2),(0,s._)("button",{type:"button",class:(0,a.C_)(["list-group-item list-group-item-action",{active:"醫藥"==t.filter}]),onClick:e[4]||(e[4]=t=>S.changeFilter("醫藥"))},"醫藥",2),(0,s._)("button",{type:"button",class:(0,a.C_)(["list-group-item list-group-item-action",{active:"零食"==t.filter}]),onClick:e[5]||(e[5]=t=>S.changeFilter("零食"))},"零食",2)])]),(0,s._)("div",P,[0!==t.filtedProducts.length?((0,s.wg)(),(0,s.iD)("div",L,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.filtedProducts,(i=>((0,s.wg)(),(0,s.iD)("div",{class:"col",key:i.id},[(0,s._)("div",{class:"card h-100",id:i.id},[(0,s._)("div",D,[S.checkLoveList(i)?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"border-0 rounded",style:{"background-color":"rgba(255, 0, 0, 0.62)"},onClick:t=>S.toggleLoveProduct(i,"add")},j,8,T)):((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"border-0 rounded",style:{"background-color":"rgba(255, 255, 255, 0.596)"},onClick:t=>S.toggleLoveProduct(i,"del")},z,8,E))]),(0,s._)("div",F,[(0,s._)("div",{class:"bg-img rounded-top",style:(0,a.j5)({"background-image":"url("+i.imageUrl+")"})},null,4)]),(0,s._)("div",U,[(0,s._)("p",N,(0,a.zw)(i.category),1),(0,s._)("h5",O,(0,a.zw)(i.title),1),(0,s._)("div",H,[(0,s._)("span",J," 原價"+(0,a.zw)(t.$filters.currency(i.origin_price))+"元",1),(0,s._)("span",W," 售價"+(0,a.zw)(t.$filters.currency(i.price))+"元",1)])]),(0,s._)("div",Y,[(0,s._)("a",{class:"btn btn-outline-danger btn stretched-link w-100","data-id":i.id,href:"#",onClick:(0,o.iM)((t=>S.getProduct(i.id)),["prevent"]),onFocus:e[6]||(e[6]=e=>t.hoverEffect("in",e)),onFocusout:e[7]||(e[7]=e=>t.hoverEffect("out",e)),onMouseenter:e[8]||(e[8]=e=>t.hoverEffect("in",e)),onMouseleave:e[9]||(e[9]=e=>t.hoverEffect("out",e))},"商品頁",40,K)])],8,I)])))),128))])):((0,s.wg)(),(0,s.iD)("div",q,V))])])]),(0,s.Wm)(B,{pages:t.pagination,onEmitPages:t.filtProducts},null,8,["pages","onEmitPages"])])])]),(0,s.Wm)(A,{cart:t.cart,onChangeCart:t.getCart},null,8,["cart","onChangeCart"])],64)}i(7658);var G=i(5239),Q=i(7221),R=i(943),X=i(8692),tt=i(4612),et={components:{PaginationModel:G.Z,UserCart:Q.Z},data(){return{products:[],loveItemList:{},pageItems:9,isLoading:!1,specialText:!1,status:{loadingItem:""}}},inject:["emitter","$httpMessageState"],methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/cong-ren/products/all";this.$http.get(t).then((t=>{t.data.success&&(this.products=t.data.products,this.filtProducts())})).catch((t=>{console.log(t)}))},getProduct(t){this.$router.push(`/product/${t}`)},toggleLoveProduct(t,e){"add"===e?(this.loveItemList[t.id]=t,localStorage.setItem("loveItemList",JSON.stringify(this.loveItemList))):"del"===e&&(delete this.loveItemList[t.id],localStorage.setItem("loveItemList",JSON.stringify(this.loveItemList)))},checkLoveList(t){return void 0===this.loveItemList[t.id]},updateLovedItem(){localStorage.getItem("loveItemList")?this.loveItemList=JSON.parse(localStorage.getItem("loveItemList")):this.loveItemList={}},changeFilter(t){this.filter=t,this.filtProducts()},textCheck(){const t=this.searchText.replace(/[`~!@#$%^&*()+=<>?:"{}|,./;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/g,"");t!==this.searchText?this.specialText=!0:(this.specialText=!1,this.filtProducts(1))}},created(){this.getProducts(),this.updateLovedItem()},mixins:[R.Z,X.Z,tt.Z]},it=i(89);const st=(0,it.Z)(et,[["render",A]]);var at=st}}]);
//# sourceMappingURL=278.7c30906b.js.map