"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[851],{851:function(e,s,a){a.r(s),a.d(s,{default:function(){return $}});var t=a(3396),l=a(7139),r=a(9242);const i={class:"mt-5 row justify-content-center bg-light"},o=(0,t.uE)('<h5 class="text-center mt-3">訂購流程</h5><div class="row justify-content-center"><div class="col-sm-4 mt-3" style="max-width:200px;"><div class="border border-3 border-secondary rounded"><p class="text-center text-secondary mb-0">確認購物車</p></div></div><div class="col-sm-4 mt-3" style="max-width:200px;"><div class="border border-3 border-danger rounded"><p class="text-center text-danger mb-0">填寫訂購資訊</p></div></div><div class="col-sm-4 mt-3" style="max-width:200px;"><div class="border border-3 border-secondary rounded"><p class="text-center text-secondary mb-0">建立訂單</p></div></div></div>',2),d=(0,t._)("h5",{class:"text-center"},"收件人資訊",-1),c={class:"mb-3"},n={for:"email",class:"form-label"},m={key:0,class:"text-danger mb-0"},u={class:"mb-3"},p={for:"name",class:"form-label"},b={key:0,class:"text-danger mb-0"},h={class:"mb-3"},f={for:"tel",class:"form-label"},g={key:0,class:"text-danger mb-0"},v={class:"mb-3"},x={for:"address",class:"form-label"},k={key:0,class:"text-danger mb-0"},_={class:"mb-3"},y={for:"message",class:"form-label"},w={class:"text-end d-flex justify-content-between"},C=(0,t._)("i",{class:"bi bi-arrow-bar-left"},null,-1),T=(0,t._)("button",{class:"btn btn-danger w-50"},[(0,t.Uk)(" 建立訂單"),(0,t._)("i",{class:"bi bi-arrow-bar-right"})],-1);function q(e,s,a,q,V,U){const W=(0,t.up)("LoadingOverlay"),$=(0,t.up)("v-field"),j=(0,t.up)("ErrorMessage"),L=(0,t.up)("v-form");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(W,{active:V.isLoading},null,8,["active"]),(0,t._)("div",i,[o,(0,t.Wm)(L,{class:"col-md-6 bg-white mt-3 p-5",onSubmit:U.createOrder},{default:(0,t.w5)((({errors:e})=>[d,(0,t._)("div",c,[(0,t._)("label",n,[(0,t.Uk)("Email"),(0,t.kq)("",!0)]),(0,t.Wm)($,{id:"email",name:"email",type:"email",class:(0,l.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:V.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=e=>V.form.user.email=e),onChange:s[1]||(s[1]=e=>U.textCheck("email"))},null,8,["class","modelValue"]),(0,t.Wm)(j,{name:"email",class:"invalid-feedback"}),V.specialText.email?((0,t.wg)(),(0,t.iD)("p",m,"請勿輸入特殊符號")):(0,t.kq)("",!0)]),(0,t._)("div",u,[(0,t._)("label",p,[(0,t.Uk)("收件人姓名"),(0,t.kq)("",!0)]),(0,t.Wm)($,{id:"name",name:"姓名",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:V.form.user.name,"onUpdate:modelValue":s[2]||(s[2]=e=>V.form.user.name=e),onChange:s[3]||(s[3]=e=>U.textCheck("name"))},null,8,["class","modelValue"]),(0,t.Wm)(j,{name:"姓名",class:"invalid-feedback"}),V.specialText.name?((0,t.wg)(),(0,t.iD)("p",b,"請勿輸入特殊符號")):(0,t.kq)("",!0)]),(0,t._)("div",h,[(0,t._)("label",f,[(0,t.Uk)("收件人電話"),(0,t.kq)("",!0)]),(0,t.Wm)($,{id:"tel",name:"電話",type:"tel",class:(0,l.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:V.form.user.tel,"onUpdate:modelValue":s[4]||(s[4]=e=>V.form.user.tel=e),onChange:s[5]||(s[5]=e=>U.textCheck("tel"))},null,8,["class","modelValue"]),(0,t.Wm)(j,{name:"電話",class:"invalid-feedback"}),V.specialText.tel?((0,t.wg)(),(0,t.iD)("p",g,"請勿輸入特殊符號")):(0,t.kq)("",!0)]),(0,t._)("div",v,[(0,t._)("label",x,[(0,t.Uk)("收件人地址"),(0,t.kq)("",!0)]),(0,t.Wm)($,{id:"address",name:"地址",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:V.form.user.address,"onUpdate:modelValue":s[6]||(s[6]=e=>V.form.user.address=e),onChange:s[7]||(s[7]=e=>U.textCheck("address"))},null,8,["class","modelValue"]),(0,t.Wm)(j,{name:"地址",class:"invalid-feedback"}),V.specialText.address?((0,t.wg)(),(0,t.iD)("p",k,"請勿輸入特殊符號")):(0,t.kq)("",!0)]),(0,t._)("div",_,[(0,t._)("label",y,[(0,t.Uk)("留言"),(0,t.kq)("",!0)]),(0,t.wy)((0,t._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[8]||(s[8]=e=>V.form.message=e)},null,512),[[r.nr,V.form.message]])]),(0,t._)("div",w,[(0,t._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:s[9]||(s[9]=(...e)=>U.backToCart&&U.backToCart(...e))},[C,(0,t.Uk)("回到購物車 ")]),T])])),_:1},8,["onSubmit"])])],64)}a(7658);var V={data(){return{isLoading:!1,specialText:{email:!1,name:!1,tel:!1,address:!1},status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},inject:["$httpMessageState"],methods:{createOrder(){if(this.specialText.email&&this.specialText.name&&this.specialText.tel&&this.specialText.address)return;const e="https://vue3-course-api.hexschool.io/api/cong-ren/order",s=this.form;this.isLoading=!0,this.$http.post(e,{data:s}).then((e=>{this.isLoading=!1,e.data.success?(this.$httpMessageState("success","建立訂單成功","感謝您的訂購 !"),this.$router.push(`/userCheckout/order/${e.data.orderId}`)):this.$httpMessageState("warning","建立訂單失敗",e.data.message)})).catch((e=>{this.isLoading=!1,console.log(e),this.$httpMessageState("danger","發生錯誤","請聯繫工程師。")}))},backToCart(){this.$router.go(-1)},textCheck(e){const s=this.form.user[e].replace(/[`~!#$%^&*()+=<>?:"{}|,/;'\\[\]·~！#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/g,"");s!==this.form.user[e]?this.specialText[e]=!0:this.specialText[e]=!1}}},U=a(89);const W=(0,U.Z)(V,[["render",q]]);var $=W}}]);
//# sourceMappingURL=851.37e3b51c.js.map