{"version":3,"file":"js/150.5718035c.js","mappings":"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","sources":["webpack://vue-project/./src/components/UserCart.vue","webpack://vue-project/./src/components/UserCart.vue?ce6b"],"sourcesContent":["<template>\n  <LoadingOverlay :active=\"isLoading\"></LoadingOverlay>\n  <div class=\"bg-light\">\n    <div class=\"container bg-light\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-11 bg-white mt-5\">\n          <div class=\"row justify-content-center\">\n            <div class=\"col-md-8 mb-5 pt-3\">\n              <h5 class=\"text-center\">訂購流程</h5>\n              <div class=\"row g-3 justify-content-center\">\n                <div class=\"col-sm-4\" style=\"max-width: 200px;\">\n                  <div class=\"border border-3 border-danger rounded\">\n                    <p class=\"text-center text-danger mb-0\">確認購物車</p>\n                  </div>\n                </div>\n                <div class=\"col-sm-4\" style=\"max-width: 200px;\">\n                  <div class=\"border border-3 border-secondary rounded\">\n                    <p class=\"text-center text-secondary mb-0\">填寫訂購資訊</p>\n                  </div>\n                </div>\n                <div class=\"col-sm-4\" style=\"max-width: 200px;\">\n                  <div class=\"border border-3 border-secondary rounded\">\n                    <p class=\"text-center text-secondary mb-0\">建立訂單</p>\n                  </div>\n                </div>\n              </div>\n              <div class=\"my-3\">\n                <h5 class=\"text-center mt-3 fw-bold\">購物車</h5>\n                <table class=\"table align-middle\">\n                  <thead class=\"table-light\">\n                    <tr>\n                      <th></th>\n                      <th>品名</th>\n                      <th style=\"width: 120px\">數量</th>\n                      <th class=\"text-center\">單價</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                  <template v-if=\"!cart.carts.length == 0\">\n                    <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                      <td>\n                        <button type=\"button\" class=\"btn btn-outline-danger btn-sm\"\n                                @click=\"removeCartItem(item.id)\">\n                          <i class=\"bi bi-trash\"></i>\n                        </button>\n                      </td>\n                      <td>\n                        {{ item.product.title }}\n                        <div class=\"text-success\" v-if=\"item.coupon\">\n                          已套用優惠券\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"input-group input-group-sm\">\n                          <input type=\"number\" class=\"form-control\" aria-label=\"buy number\"\n                                v-model.number=\"item.qty\" min=\"1\"\n                                @change=\"updateCart(item)\"\n                                :disabled=\"this.status.loadingItem === item.id\">\n                          <div class=\"input-group-text bg-warning\">/ {{ item.product.unit }}</div>\n                        </div>\n                      </td>\n                      <td class=\"text-end\">\n                        <small v-if=\"cart.final_total !== cart.total\" class=\"text-success\">\n                          折扣價：</small>\n                        {{ $filters.currency(item.final_total) }}\n                      </td>\n                    </tr>\n                  </template>\n                  <tr v-else>\n                    <td colspan=\"4\">\n                      <p class=\"text-center text-secondary\">目前購物車內沒有商品...</p>\n                    </td>\n                  </tr>\n                  </tbody>\n                  <tfoot>\n                  <tr>\n                    <td colspan=\"2\">\n                      <button type=\"button\" class=\"btn btn-outline-danger\"\n                      @click=\"removeCartItem('all')\"\n                      :disabled=\"cart.carts.length == 0\">清空購物車</button>\n                    </td>\n                    <td colspan=\"1\" class=\"text-end\">總計</td>\n                    <td class=\"text-end\">{{ $filters.currency(cart.total) }}</td>\n                  </tr>\n                  <tr v-if=\"cart.final_total !== cart.total\">\n                    <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n                    <td class=\"text-end text-success\">{{ $filters.currency(cart.final_total) }}</td>\n                  </tr>\n                  </tfoot>\n                </table>\n                <div class=\"input-group input-group-sm mb-1\" style=\"max-width: 300px;\">\n                  <input type=\"text\" class=\"form-control\" aria-label=\"coupon_code\"\n                  v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\n                  <button class=\"btn btn-warning\" type=\"button\" @click=\"addCouponCode\"\n                  :disabled=\"coupon_code === '' || cart.carts.length == 0\">\n                      套用優惠碼\n                  </button>\n                </div>\n                <p class=\"text-secondary\">提示 : 請輸入[ japan666 ]</p>\n              </div>\n              <router-link to=\"/user/userCheckout/userInfo\" class=\"btn btn-danger w-100\"\n              v-if=\"!cart.carts.length == 0\">\n              下一步 : 填寫訂購資訊</router-link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      cart: {\n        carts: [],\n      },\n      coupon_code: '',\n      status: {\n        loadingItem: '', // 對應品項 id\n      },\n    };\n  },\n  inject: ['$httpMessageState'],\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url)\n        .then((res) => {\n          this.cart = res.data.data;\n          this.isLoading = false;\n        });\n    },\n    updateCart(item) {\n      let modifyQty = 1;\n      if (item.qty >= 1) {\n        modifyQty = item.qty;\n      }\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.isLoading = true;\n      this.status.loadingItem = item.id;\n      const cart = {\n        product_id: item.product_id,\n        qty: modifyQty,\n      };\n      this.$http.put(url, { data: cart })\n        .then(() => {\n          this.isLoading = false;\n          this.status.loadingItem = '';\n          this.getCart();\n        })\n        .catch((err) => {\n          console.log(err.response);\n        });\n    },\n    removeCartItem(id) {\n      let target = 'carts';\n      if (id !== 'all') {\n        target = `cart/${id}`;\n      }\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/${target}`;\n      this.isLoading = true;\n      this.$http.delete(url)\n        .then(() => {\n          this.isLoading = false;\n          this.$httpMessageState('success', '刪除商品成功', '快去尋找更適合的商品吧 ~ !');\n          this.getCart();\n        })\n        .catch((err) => {\n          console.log(err.response);\n          this.$httpMessageState('danger', '發生錯誤', '請聯繫工程師。');\n        });\n    },\n    addCouponCode() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http.post(url, { data: coupon })\n        .then((res) => {\n          this.isLoading = false;\n          if (res.data.success) {\n            this.$httpMessageState('success', '套用優惠券成功', '確認商品後，點擊下一步填寫資料。');\n            this.getCart();\n          } else {\n            this.$httpMessageState('warning', '套用優惠券失敗', res.data.message);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          this.$httpMessageState('danger', '發生錯誤', '請聯繫工程師。');\n        });\n    },\n  },\n  created() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./UserCart.vue?vue&type=template&id=0c8eaa47\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\GitHub\\\\VueProject\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_hoisted_14","colspan","_hoisted_23","_createVNode","_component_LoadingOverlay","active","$data","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","cart","carts","length","_createElementBlock","_Fragment","key","_renderList","item","id","type","onClick","$event","$options","removeCartItem","product","title","coupon","_hoisted_16","_hoisted_17","qty","min","onChange","updateCart","disabled","status","loadingItem","_hoisted_19","_toDisplayString","unit","_hoisted_20","final_total","total","_hoisted_21","_ctx","$filters","currency","_hoisted_22","_hoisted_24","_hoisted_25","_cache","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","coupon_code","placeholder","args","addCouponCode","_hoisted_33","_hoisted_34","_createBlock","_component_router_link","to","data","inject","methods","getCart","url","this","$http","get","then","res","modifyQty","product_id","put","catch","err","console","log","response","target","delete","$httpMessageState","code","post","success","message","created","__exports__","render"],"sourceRoot":""}